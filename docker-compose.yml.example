version: '3'

networks:
  tgbot:
    external: false

services:
  bot:
    image: 'avimitin/go-bot:latest'
    container_name: tgbot
    networks:
      - 'tgbot'
    volumes:
      - './data:/data'
    depends_on:
      - db

  db:
    image: 'mariadb:10'
    restart: always
    container_name: tgbot_db
    environment:
      - MYSQL_RANDOM_ROOT_PASSWORD=yes
      - MYSQL_USER=tgbot
      - MYSQL_PASSWORD=password
      - MYSQL_DATABASE=tgbot
    networks:
      - 'tgbot'
    ports:
      - '127.0.0.1:3306:3306'
    volumes:
      - './mysql:/var/liv/mysql'
